<div>
  <%= f = form_for @changeset, "#",
    id: "profile_form",
    phx_change: "validate",
    phx_submit: "save"
  %>
    <div class="shadow-md bg-white rounded-md p-4 relative">
      <%= if @profile.photo_url || @photo_url do %>
        <%= if @profile.photo_url && @photo_url do %>
          <div class="absolute right-24 md:right-32 top-4 text-red-700 text-xs px-1 cursor-pointer" phx-click="toggle-photo-delete">delete photo</div>
        <% else %>
          <div class="absolute right-24 md:right-32 top-4 cursor-pointer" phx-click="toggle-photo-delete">
            <div class="text-white bg-red-700 text-xs px-1">photo marked for delete</div>
            <div class="text-right link pr-2 text-xs">undo</div>
          </div>
        <% end %>
      <% end %>
      <div class="w-24 h-24 md:w-28 md:h-28 absolute top-4 md:top-2 right-4 bg-teal-500 rounded-full p-1" phx-drop-target="<%= @uploads.photo.ref %>">
        <%= for {_ref, err} <- @uploads.photo.errors do %>
          <p class="alert alert-danger"><%= Phoenix.Naming.humanize(err) %></p>
        <% end %>
        <%= for entry <- @uploads.photo.entries do %>
          <%= live_img_preview entry, width: 90, class: "w-full h-full rounded-full" %>
        <% end %>
        <%= live_file_input @uploads.photo, class: "opacity-0 h-full w-full cursor-pointer absolute top-1 left-2" %>
        <%= if @profile.photo_url && length(@uploads.photo.entries) === 0 do %>
          <img src="<%= @profile.photo_url %>" class="w-full h-full rounded-full" />
        <% else %>
          <%= if length(@uploads.photo.entries) === 0 do %>
            <div class="w-full h-full rounded-full text-bgray-100 bg-gray-800 flex items-center justify-center text-center ">Upload<br />photo</div>
          <% end %>
        <% end %>
      </div>
      <div class="mt-4 w-3/4">
        <%= label f, :name %>
        <%= text_input f, :name, class: "text-field", phx_debounce: "blur" %>
        <%= error_tag f, :name %>
      </div>
      <div class="mt-4 flex flex-wrap -mx-2">
        <div class="w-full md:w-1/2">
          <div class="px-2">
            <%= label f, :company_name %>
            <%= text_input f, :company_name, class: "text-field", phx_debounce: "blur" %>
            <%= error_tag f, :company_name %>
          </div>
        </div>
        <div class="w-full md:w-1/2">
          <div class="px-2">
            <%= label f, :job_title %>
            <%= text_input f, :job_title, class: "text-field", phx_debounce: "blur" %>
            <%= error_tag f, :job_title %>
          </div>
        </div>
      </div>
      <div class="mt-4">
        <%= label f, :tagline %>
        <%= text_input f, :tagline, class: "text-field", phx_debounce: "blur" %>
        <%= error_tag f, :tagline %>
      </div>
      <div class="mt-4">
        <%= label f, :bio %>
        <%= textarea f, :bio, class: "textarea", phx_debounce: "blur" %>
        <%= error_tag f, :bio %>
      </div>
      <div class=" mt-4 sub-form">
        <h2>Contacts</h2>
        <p class="text-xs mt-1">Add <strong>public</strong> contact information such as email addresses, phone numbers, links, or any other method of staying connected.</p>
        <%= live_component @socket, ContactForm,
          form: f,
          id: :profile_contacts
        %>
      </div>
      <%= submit "Update profile", class: "submit mt-4 w-full", phx_disable_with: "Updating..." %>
    </div>
  </form>
</div>
